# 🎮 掼蛋游戏素材文档

## 概述

本项目使用高质量、程序化生成的游戏素材，确保视觉效果统一、清晰度高、易于维护。

## 素材清单

### 核心素材
- `cards.png` - 108帧卡牌精灵表 (840×635像素)
- `card_back.png` - 卡背纹理 (70×95像素)

### UI素材
- `play_button.png` - 出牌按钮 (120×40像素)
- `pass_button.png` - 过牌按钮 (120×40像素)  
- `tribute_button.png` - 进贡按钮 (120×40像素)

## 卡牌精灵表结构

### 排列方式
- **网格：** 12列 × 9行 = 108张卡牌
- **单张尺寸：** 70×95像素
- **总尺寸：** 840×635像素

### 卡牌索引对照表

| 帧范围 | 内容 | 说明 |
|--------|------|------|
| 0-51 | 第一副牌 | 黑桃2-A, 红心2-A, 方块2-A, 梅花2-A |
| 52-103 | 第二副牌 | 与第一副相同顺序 |
| 104-105 | 小王 × 2 | 黑色星星，"小王"标识 |
| 106-107 | 大王 × 2 | 红色星星，"大王"标识 |

### 具体花色顺序
每副牌内部按以下顺序排列：
1. **黑桃 (♠)：** 2,3,4,5,6,7,8,9,10,J,Q,K,A
2. **红心 (♥)：** 2,3,4,5,6,7,8,9,10,J,Q,K,A  
3. **方块 (♦)：** 2,3,4,5,6,7,8,9,10,J,Q,K,A
4. **梅花 (♣)：** 2,3,4,5,6,7,8,9,10,J,Q,K,A

## 设计特点

### 卡牌设计
- **背景：** 奶白色，黑色边框
- **字体：** 系统默认字体，多级别回退
- **颜色：** 红心/方块使用红色，黑桃/梅花使用黑色
- **布局：** 左上角和右下角显示数值和花色
- **中心图案：** 根据牌面值显示相应数量的花色符号

### 王牌设计
- **背景：** 黑色背景，金色边框
- **符号：** 小王使用空心星星(☆)，大王使用实心星星(★)
- **文字：** 底部显示"小王"或"大王"

### 卡背设计
- **背景：** 深蓝色底色，金色边框
- **图案：** 钻石装饰图案
- **标识：** 中心显示"掼蛋"字样

## 技术实现

### 生成工具
使用Python + Pillow库程序化生成所有素材：

```bash
# 生成所有素材
python3 scripts/generate_assets.py
```

### 在游戏中使用

```javascript
// Phaser.js 加载
function preload() {
    this.load.spritesheet('cards', 'assets/cards.png', {
        frameWidth: 70,
        frameHeight: 95
    });
    this.load.image('card_back', 'assets/card_back.png');
}

// 使用特定卡牌
function create() {
    // 显示黑桃2 (第一张卡牌)
    this.add.sprite(100, 100, 'cards', 0);
    
    // 显示大王 (第107张卡牌)
    this.add.sprite(200, 100, 'cards', 107);
    
    // 显示卡背
    this.add.image(300, 100, 'card_back');
}
```

## 质量优化

### 高清渲染
- 使用2倍原始尺寸渲染后缩放，确保清晰度
- 使用LANCZOS算法进行高质量缩放
- 启用抗锯齿，确保边缘平滑

### 性能优化
- 使用PNG格式，启用压缩优化
- 精灵表合并减少HTTP请求
- 透明通道支持，便于叠加效果

## 预览和测试

### 本地预览
访问 `client/asset_preview.html` 查看所有生成的素材：

```bash
# 启动本地服务器
cd client
python3 -m http.server 8000
# 访问: http://localhost:8000/asset_preview.html
```

### 网格检查
预览页面包含网格线，便于验证精灵表的准确性。

## 自定义和扩展

### 修改样式
编辑 `scripts/generate_assets.py` 中的样式配置：

```python
# 颜色配置
COLORS = {
    'red': (220, 20, 60),      # 红心/方块
    'black': (40, 40, 40),     # 黑桃/草花
    'white': (255, 255, 255),  # 白色
    'cream': (255, 248, 220),  # 奶白色背景
    'gold': (255, 215, 0),     # 金色边框
    'blue': (25, 25, 112),     # 深蓝色背景
}
```

### 添加新素材
在 `create_ui_assets()` 函数中添加新的UI元素。

## 版本历史

- **v1.0** - 初始版本，包含基础卡牌和UI素材
- **v1.1** - 添加高清渲染支持
- **v1.2** - 优化王牌设计，添加装饰图案

## 故障排除

### 常见问题
1. **依赖缺失：** 确保安装了Pillow库
   ```bash
   pip3 install pillow
   ```

2. **路径错误：** 检查脚本中的路径配置
   
3. **权限问题：** 确保有写入assets目录的权限

### 重新生成
如果素材损坏或需要更新：

```bash
# 删除旧素材
rm client/assets/cards.png client/assets/card_back.png

# 重新生成
python3 scripts/generate_assets.py
```

## 许可证

本项目生成的素材仅用于掼蛋游戏项目，请勿用于商业用途。